<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PJ-ECC | Admin Engine</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div class="background-overlay"></div>
    <div class="container">
        <header>
            <span class="logo-text" style="font-size: 2.5em;">ENGINE</span>
            <span class="tagline">DATA GENERATOR</span>
        </header>

        <div class="result-card" style="padding: 20px; background: rgba(0,0,0,0.3);">
            <input type="text" id="mName" placeholder="Employee Full Name" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid #333; background:#000; color:#fff;">
            <input type="text" id="mDate" placeholder="Joining Date (DD-MM-YYYY)" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid #333; background:#000; color:#fff;">
            <input type="text" id="mAddr" placeholder="Work Address" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid #333; background:#000; color:#fff;">
            <input type="text" id="mRef" placeholder="Reference No (PJ-01/24)" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid #333; background:#000; color:#fff;">
            
            <button onclick="createQR()" class="btn btn-primary">GENERATE ENCRYPTED QR</button>
            
            <center>
                <div id="qrcode-box" style="display:none; margin-top:20px; padding:15px; background:white; border-radius:15px; width: fit-content;"></div>
            </center>
        </div>

        <br>
        <button onclick="window.location.href='index.html'" class="btn btn-tertiary" style="padding:10px;">‚Üê EXIT ADMIN</button>
    </div>

    <script>
        function createQR() {
            const n = document.getElementById('mName').value;
            const d = document.getElementById('mDate').value;
            const a = document.getElementById('mAddr').value;
            const r = document.getElementById('mRef').value;

            if(!n || !r) return alert("Please fill all details!");

            const qrContainer = document.getElementById('qrcode-box');
            qrContainer.innerHTML = "";
            qrContainer.style.display = "block";

            // Root URL (404 Error se bachne ke liye base path perfect hai)
            const baseUrl = "https://pjcompanyofficial.github.io/pj-ecc/index.html";
            const finalLink = `${baseUrl}?n=${encodeURIComponent(n)}&d=${encodeURIComponent(d)}&a=${encodeURIComponent(a)}&r=${encodeURIComponent(r)}`;

            new QRCode(qrContainer, {
                text: finalLink,
                width: 180,
                height: 180,
                colorDark : "#000000",
                colorLight : "#ffffff"
            });
            
            alert("QR Generated Successfully!");
        }
    </script>
</body>
</html>
