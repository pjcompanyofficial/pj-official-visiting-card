<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Card Scanner Fixed</title><style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#0a0a0a;
  overflow:hidden;
  font-family:sans-serif;
}

.scene{
  perspective:1400px;
}

.card{
  width:320px;
  height:200px;
  position:relative;
  transform-style:preserve-3d;
  transition:transform 0.2s ease-out;
  animation:autoRotate 10s linear infinite;
}

@keyframes autoRotate{
  0%{transform:rotateY(0deg) rotateX(0deg);} 
  100%{transform:rotateY(360deg) rotateX(360deg);} 
}

.face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:18px;
  backface-visibility:hidden;
  box-shadow:
    inset 0 0 15px rgba(255,255,255,0.15),
    0 12px 30px rgba(0,0,0,0.8);
}

.front{
  background:linear-gradient(145deg,#111,#222);
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-size:22px;
}

.back{
  background:#fff;
  transform:rotateY(180deg);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* QR Container */
.qr-wrapper{
  position:relative;
  width:140px;
  height:140px;
}

.qr{
  width:100%;
  height:100%;
  position:absolute;
  z-index:1;
}

/* SCANNER EXACT OVER QR */
.scanner{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  display:none;
  z-index:2;
}

.scan-line{
  width:100%;
  height:6px;
  background:linear-gradient(to right,transparent,orange,transparent);
  position:absolute;
  top:0;
  animation:scanMove 2s linear infinite;
  box-shadow:0 0 20px orange;
}

@keyframes scanMove{
  0%{top:0;}
  100%{top:100%;}
}

/* Button */
.scan-btn{
  position:absolute;
  bottom:-60px;
  width:160px;
  padding:12px;
  border:none;
  border-radius:30px;
  background:orange;
  color:black;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 15px orange;
}

</style></head><body><div class="scene">
  <div class="card" id="card"><div class="face front">
  FRONT SIDE
</div>

<div class="face back">
  <div class="qr-wrapper">
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=140x140&data=https://example.com" class="qr">
    
    <div class="scanner" id="scanner">
      <div class="scan-line"></div>
    </div>
  </div>
</div>

  </div>
</div><button class="scan-btn" onclick="startScan()">SCAN</button>

<script>
const card = document.getElementById('card');
let isDragging = false;
let lastX, lastY;
let rotX = 0;
let rotY = 0;

// TOUCH ROTATION
card.addEventListener('touchstart', e => {
  isDragging = true;
  lastX = e.touches[0].clientX;
  lastY = e.touches[0].clientY;
});

card.addEventListener('touchmove', e => {
  if(!isDragging) return;

  let dx = e.touches[0].clientX - lastX;
  let dy = e.touches[0].clientY - lastY;

  rotY += dx * 0.5;
  rotX -= dy * 0.5;

  card.style.animation = 'none';
  card.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;

  lastX = e.touches[0].clientX;
  lastY = e.touches[0].clientY;
});

card.addEventListener('touchend', () => {
  isDragging = false;
});

// SCAN FUNCTION (FIXED)
function startScan(){
  const scanner = document.getElementById('scanner');

  // force back side visible
  card.style.animation = 'none';
  card.style.transform = 'rotateY(180deg)';

  // show scanner EXACTLY on QR
  scanner.style.display = 'block';

  setTimeout(()=>{
    window.location.href = "https://example.com";
  },7000);
}

</script></body>
</html>
